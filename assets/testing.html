<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Working Reviews Slider</title>
    <style>
        :root{
            --accent: #ffb703;
            --bg-card: #222;
            --text-card: #fff;
            --gutter: 16px;
        }
        body{
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: #f5f5f7;
            margin:0;
            padding:24px;
            display:flex;
            justify-content:center;
        }

        .container{
            width:100%;
            max-width:1000px;
            background: #fff;
            border-radius:12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            padding: 24px;
        }

        h2 { text-align:center; margin:0 0 18px 0; font-size:22px; }

        /* slider */
        .slider {
            position: relative;
            overflow: hidden;
            border-radius:10px;
            background: linear-gradient(180deg,#fafafa,#f0f0f2);
            padding: 18px;
        }

        .slides {
            display:flex;
            transition: transform 400ms ease;
            will-change: transform;
        }

        .slide {
            min-width:100%;
            box-sizing: border-box;
            padding:12px;
            display:flex;
            justify-content:center;
            align-items:flex-start;
            gap:16px;
        }

        .card {
            background: var(--bg-card);
            color: var(--text-card);
            padding:16px;
            border-radius:10px;
            width:100%;
            max-width:640px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.25);
        }

        .card p { margin:0 0 10px 0; line-height:1.4; }
        .card h6 { margin:0 0 6px 0; font-size:15px; font-weight:600; }
        .meta { font-size:13px; opacity:0.85; }

        .client-image img {
            width:72px;
            height:72px;
            object-fit:cover;
            border-radius:10px;
            border:3px solid #fff;
            box-shadow:0 6px 18px rgba(0,0,0,0.15);
        }

        /* controls */
        .controls {
            position:absolute;
            left:12px; right:12px; top:50%;
            transform:translateY(-50%);
            display:flex;
            justify-content:space-between;
            pointer-events:none;
        }
        .controls button {
            pointer-events:auto;
            background: rgba(0,0,0,0.55);
            color:#fff;
            border:0;
            padding:8px 12px;
            border-radius:999px;
            cursor:pointer;
            font-size:14px;
        }

        .indicators {
            display:flex;
            gap:8px;
            justify-content:center;
            padding:12px 0 0 0;
        }
        .indicator {
            width:12px; height:12px; border-radius:50%;
            background: #ddd; cursor:pointer; border:0;
        }
        .indicator.active { background: var(--accent); box-shadow: 0 0 0 4px rgba(255,183,3,0.12); }

        /* add-review area */
        .add-review {
            margin-top:18px;
            display:flex;
            gap:12px;
            align-items:flex-start;
        }
        textarea {
            width:100%;
            min-height:72px;
            resize:vertical;
            padding:8px;
            border-radius:8px;
            border:1px solid #ddd;
            font-family:inherit;
        }
        .btn {
            background:var(--accent);
            color:#111;
            border:0;
            padding:10px 14px;
            border-radius:999px;
            cursor:pointer;
            font-weight:600;
        }

        @media (min-width:700px){
            .slide { align-items:center; }
            .card { display:flex; gap:16px; align-items:center; }
            .card .card-body { flex:1; }
            .client-image img { width:96px; height:96px; }
        }
    </style>
</head>
<body>
<div class="container">
    <h2>What Our Customers Say</h2>

    <div class="slider" id="slider">
        <div class="slides" id="slides">
            <!-- Slide 1 -->
            <div class="slide">
                <div class="card">
                    <div class="card-body">
                        <p>Excellent food and fast delivery. I loved the customization options — five stars!</p>
                        <h6>Mike Hamell</h6>
                        <div class="meta">Great experience!</div>
                    </div>
                    <div class="client-image" style="margin-left:12px;">
                        <img src="https://via.placeholder.com/96x96.png?text=M" alt="Mike">
                    </div>
                </div>
            </div>

            <!-- Slide 2 -->
            <div class="slide">
                <div class="card">
                    <div class="card-body">
                        <p>Lovely flavors, friendly staff and a clean kitchen. Will order again.</p>
                        <h6>Moana Michell</h6>
                        <div class="meta">Highly recommended</div>
                    </div>
                    <div class="client-image" style="margin-left:12px;">
                        <img src="https://via.placeholder.com/96x96.png?text=Mo" alt="Moana">
                    </div>
                </div>
            </div>
        </div>

        <div class="controls" aria-hidden="false">
            <button id="prevBtn" type="button" aria-label="Previous">‹ Prev</button>
            <button id="nextBtn" type="button" aria-label="Next">Next ›</button>
        </div>

        <div class="indicators" id="indicators" aria-hidden="false"></div>
    </div>

    <!-- Add review area -->
    <div class="add-review">
        <textarea id="messageBox" placeholder="Write your honest thoughts about us"></textarea>
        <div style="display:flex;flex-direction:column;gap:10px;">
            <button id="openBtn" class="btn" type="button">Add your Review</button>
            <button id="doneReview" class="btn" type="button" style="display:none;background:#0ea5a4;color:#fff;">Done</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const slidesEl = document.getElementById('slides');
        const indicatorsEl = document.getElementById('indicators');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const slider = document.getElementById('slider');

        const openBtn = document.getElementById('openBtn');
        const doneBtn = document.getElementById('doneReview');
        const textArea = document.getElementById('messageBox');

        let currentIndex = 0;
        let slideCount = () => slidesEl.children.length;
        let autoSlideTimer = null;
        const AUTO_INTERVAL = 3500;

        function renderIndicators() {
            indicatorsEl.innerHTML = '';
            for (let i = 0; i < slideCount(); i++) {
                const dot = document.createElement('button');
                dot.className = 'indicator' + (i === currentIndex ? ' active' : '');
                dot.setAttribute('data-index', i);
                dot.addEventListener('click', () => goToIndex(i));
                indicatorsEl.appendChild(dot);
            }
        }

        function update() {
            const translateX = -currentIndex * 100;
            slidesEl.style.transform = 'translateX(' + translateX + '%)';
            // update indicators
            Array.from(indicatorsEl.children).forEach((d, idx) => {
                d.classList.toggle('active', idx === currentIndex);
            });
        }

        function next() {
            currentIndex = (currentIndex + 1) % slideCount();
            update();
        }
        function prev() {
            currentIndex = (currentIndex - 1 + slideCount()) % slideCount();
            update();
        }
        function goToIndex(i) {
            currentIndex = i % slideCount();
            update();
        }

        prevBtn.addEventListener('click', () => {
            stopAuto();
            prev();
            startAuto();
        });
        nextBtn.addEventListener('click', () => {
            stopAuto();
            next();
            startAuto();
        });

        // auto-slide
        function startAuto() {
            stopAuto();
            autoSlideTimer = setInterval(() => next(), AUTO_INTERVAL);
        }
        function stopAuto() {
            if (autoSlideTimer) { clearInterval(autoSlideTimer); autoSlideTimer = null; }
        }

        // pause on hover
        slider.addEventListener('mouseenter', stopAuto);
        slider.addEventListener('mouseleave', startAuto);

        // initialize
        renderIndicators();
        update();
        startAuto();

        // Add review button toggles Done/show area
        openBtn.addEventListener('click', () => {
            openBtn.style.display = 'none';
            doneBtn.style.display = 'inline-block';
            textArea.focus();
        });

        doneBtn.addEventListener('click', () => {
            const reviewText = textArea.value.trim();
            if (!reviewText) {
                alert('Please write your review before submitting!');
                return;
            }

            // create new slide (structure similar to existing slides)
            const slide = document.createElement('div');
            slide.className = 'slide';
            slide.innerHTML = `
          <div class="card">
            <div class="card-body">
              <p>${escapeHtml(reviewText)}</p>
              <h6>Anonymous</h6>
              <div class="meta">New Customer Review</div>
            </div>
            <div class="client-image" style="margin-left:12px;">
              <img src="https://via.placeholder.com/96x96.png?text=You" alt="Reviewer">
            </div>
          </div>
        `;
            slidesEl.appendChild(slide);

            // move to new slide
            currentIndex = slideCount() - 1;
            renderIndicators();
            update();

            // reset UI
            textArea.value = '';
            doneBtn.style.display = 'none';
            openBtn.style.display = 'inline-block';

            // restart auto (so user sees the new slide)
            stopAuto();
            startAuto();
        });

        // small helper - sanitize text to avoid injecting HTML accidentally
        function escapeHtml(unsafe) {
            return unsafe
                .replaceAll('&', '&amp;')
                .replaceAll('<', '&lt;')
                .replaceAll('>', '&gt;')
                .replaceAll('"', '&quot;')
                .replaceAll("'", '&#039;');
        }
    });
</script>
</body>
</html>
